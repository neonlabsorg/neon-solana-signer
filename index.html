<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@neonevm/solana-sign - v0.1.6</title><meta name="description" content="Documentation for @neonevm/solana-sign"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@neonevm/solana-sign - v0.1.6</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@neonevm/solana-sign - v0.1.6</h1></div><div class="tsd-panel tsd-typography"><a id="library-for-scheduled-neon-evm-transaction" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Library for Scheduled Neon EVM Transaction<a href="#library-for-scheduled-neon-evm-transaction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="how-to-install-and-run-tests" class="tsd-anchor"></a><h2 class="tsd-anchor-link">How to install and run tests<a href="#how-to-install-and-run-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="sh"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">packages/core</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code><button type="button">Copy</button></pre>

<a id="how-to-use-it-in-code" class="tsd-anchor"></a><h2 class="tsd-anchor-link">How to use it in code<a href="#how-to-use-it-in-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="install-the-package" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Install the package<a href="#install-the-package" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="shell"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@neonevm/solana-sign</span><span class="hl-1"> </span><br/><span class="hl-3"># or</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@neonevm/solana-sign</span>
</code><button type="button">Copy</button></pre>

<p>First, it is necessary to initialize all variables and providers for Solana and Neon EVM RPCs.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">getProxyState</span><span class="hl-1">(</span><span class="hl-2">`&lt;neon_proxy_rpc_url&gt;`</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">provider</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">JsonRpcProvider</span><span class="hl-1">(</span><span class="hl-2">`&lt;neon_proxy_rpc_url&gt;`</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">connection</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Connection</span><span class="hl-1">(</span><span class="hl-2">`&lt;solana_rpc_url&gt;`</span><span class="hl-1">, </span><span class="hl-2">&#39;confirmed&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">response</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">provider</span><span class="hl-1">.</span><span class="hl-0">getNetwork</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">chainId</span><span class="hl-1"> = </span><span class="hl-0">Number</span><span class="hl-1">(</span><span class="hl-7">response</span><span class="hl-1">.</span><span class="hl-7">chainId</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">token</span><span class="hl-1"> = </span><span class="hl-0">getGasToken</span><span class="hl-1">(</span><span class="hl-7">result</span><span class="hl-1">.</span><span class="hl-7">tokensList</span><span class="hl-1">, </span><span class="hl-7">chainId</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">neonProxyRpcApi</span><span class="hl-1"> = </span><span class="hl-7">result</span><span class="hl-1">.</span><span class="hl-7">proxyApi</span><span class="hl-1">;</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">neonEvmProgram</span><span class="hl-1"> = </span><span class="hl-7">result</span><span class="hl-1">.</span><span class="hl-7">evmProgramAddress</span><span class="hl-1">;</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">chainTokenMint</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">PublicKey</span><span class="hl-1">(</span><span class="hl-7">token</span><span class="hl-1">.</span><span class="hl-7">gasToken</span><span class="hl-1">.</span><span class="hl-7">tokenMint</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>Next, connect a Solana wallet (in this example, a <code>Keypair</code> is used, but any other method for signing and sending transactions on the Solana network can also be used).</p>
<p>The <code>SolanaNeonAccount</code> class includes the Solana wallet, calculates the Neon wallet, and manages the balance account required for creating a Scheduled transaction and executing transactions on the Neon EVM.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">solanaPrivateKey</span><span class="hl-1"> = </span><span class="hl-7">bs58</span><span class="hl-1">.</span><span class="hl-0">decode</span><span class="hl-1">(</span><span class="hl-2">`&lt;you_private_key_base58&gt;`</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">keypair</span><span class="hl-1"> = </span><span class="hl-7">Keypair</span><span class="hl-1">.</span><span class="hl-0">fromSecretKey</span><span class="hl-1">(</span><span class="hl-7">solanaPrivateKey</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">solanaUser</span><span class="hl-1"> = </span><span class="hl-7">SolanaNeonAccount</span><span class="hl-1">.</span><span class="hl-0">fromKeypair</span><span class="hl-1">(</span><span class="hl-7">keypair</span><span class="hl-1">, </span><span class="hl-7">neonEvmProgram</span><span class="hl-1">, </span><span class="hl-7">chainTokenMint</span><span class="hl-1">, </span><span class="hl-7">chainId</span><span class="hl-1">);</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">solanaAirdrop</span><span class="hl-1">(</span><span class="hl-7">connection</span><span class="hl-1">, </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">publicKey</span><span class="hl-1">, </span><span class="hl-8">1e9</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>We create a Scheduled transaction and send it, embedding the contract address and the method call data. Additionally, we retrieve the nonce for the Neon wallet and include this information in the Scheduled transaction.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">nonce</span><span class="hl-1"> = </span><span class="hl-0">Number</span><span class="hl-1">(</span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">neonProxyRpcApi</span><span class="hl-1">.</span><span class="hl-0">getTransactionCount</span><span class="hl-1">(</span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">));</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">result</span><span class="hl-1"> } = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">neonProxyRpcApi</span><span class="hl-1">.</span><span class="hl-0">estimateScheduledGas</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-7">scheduledSolanaPayer:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">publicKey</span><span class="hl-1">.</span><span class="hl-0">toBase58</span><span class="hl-1">(),</span><br/><span class="hl-1">  </span><span class="hl-7">transactions:</span><span class="hl-1"> [{</span><br/><span class="hl-1">    </span><span class="hl-7">from:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">to:</span><span class="hl-1"> </span><span class="hl-2">`&lt;contract_address&gt;`</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">data:</span><span class="hl-1"> </span><span class="hl-2">`&lt;call_contract_data&gt;`</span><br/><span class="hl-1">  }]</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">maxFeePerGas</span><span class="hl-1"> = </span><span class="hl-7">result</span><span class="hl-1">?.</span><span class="hl-7">maxFeePerGas</span><span class="hl-1">;</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">maxPriorityFeePerGas</span><span class="hl-1"> = </span><span class="hl-7">result</span><span class="hl-1">?.</span><span class="hl-7">maxPriorityFeePerGas</span><span class="hl-1">;</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">gasLimit</span><span class="hl-1"> = </span><span class="hl-7">result</span><span class="hl-1">?.</span><span class="hl-7">gasList</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">];</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">scheduledTransaction</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">ScheduledTransaction</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-7">nonce:</span><span class="hl-1"> </span><span class="hl-0">toBeHex</span><span class="hl-1">(</span><span class="hl-7">nonce</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-7">payer:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">target:</span><span class="hl-1"> </span><span class="hl-2">`&lt;contract_address&gt;`</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">callData:</span><span class="hl-1"> </span><span class="hl-2">`&lt;call_contract_data&gt;`</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">maxFeePerGas:</span><span class="hl-1"> </span><span class="hl-7">maxFeePerGas</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">maxPriorityFeePerGas:</span><span class="hl-1"> </span><span class="hl-7">maxPriorityFeePerGas</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">gasLimit:</span><span class="hl-1"> </span><span class="hl-7">gasLimit</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">chainId:</span><span class="hl-1"> </span><span class="hl-7">chainId</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>We create a transaction for Solana, including all the previously defined data.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">transaction</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">createScheduledNeonEvmTransaction</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-7">chainId</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">signerAddress:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">publicKey</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">tokenMintAddress:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">tokenMint</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">neonEvmProgram</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">neonWallet:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">neonWalletNonce:</span><span class="hl-1"> </span><span class="hl-7">nonce</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">neonTransaction:</span><span class="hl-1"> </span><span class="hl-7">scheduledTransaction</span><span class="hl-1">.</span><span class="hl-0">serialize</span><span class="hl-1">()</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>It is necessary to ensure that the balance account is initialized on Solana before the Scheduled transaction is executed. If it is not, an instruction to create the balance account must be added.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">account</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">connection</span><span class="hl-1">.</span><span class="hl-0">getAccountInfo</span><span class="hl-1">(</span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">balanceAddress</span><span class="hl-1">);</span><br/><br/><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-7">account</span><span class="hl-1"> === </span><span class="hl-4">null</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-7">transaction</span><span class="hl-1">.</span><span class="hl-7">instructions</span><span class="hl-1">.</span><span class="hl-0">unshift</span><span class="hl-1">(</span><span class="hl-0">createBalanceAccountInstruction</span><span class="hl-1">(</span><span class="hl-7">neonEvmProgram</span><span class="hl-1">, </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">publicKey</span><span class="hl-1">, </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">, </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">chainId</span><span class="hl-1">));</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Sign and send the transaction to the Solana network.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">blockhash</span><span class="hl-1">, </span><span class="hl-5">lastValidBlockHeight</span><span class="hl-1"> } = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">connection</span><span class="hl-1">.</span><span class="hl-0">getLatestBlockhash</span><span class="hl-1">();</span><br/><span class="hl-7">transaction</span><span class="hl-1">.</span><span class="hl-7">recentBlockhash</span><span class="hl-1"> = </span><span class="hl-7">blockhash</span><span class="hl-1">;</span><br/><span class="hl-7">transaction</span><span class="hl-1">.</span><span class="hl-0">sign</span><span class="hl-1">({ </span><span class="hl-7">publicKey:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">publicKey</span><span class="hl-1">, </span><span class="hl-7">secretKey:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">keypair</span><span class="hl-1"> });</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">signature</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">connection</span><span class="hl-1">.</span><span class="hl-0">sendRawTransaction</span><span class="hl-1">(</span><span class="hl-7">transaction</span><span class="hl-1">.</span><span class="hl-0">serialize</span><span class="hl-1">());</span><br/><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Transaction signature&#39;</span><span class="hl-1">, </span><span class="hl-7">signature</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>Wait for the Scheduled transaction to execute on the Neon EVM and display the results.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">transactions</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">neonProxyRpcApi</span><span class="hl-1">.</span><span class="hl-0">waitTransactionTreeExecution</span><span class="hl-1">(</span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">, </span><span class="hl-7">nonce</span><span class="hl-1">, </span><span class="hl-8">7e3</span><span class="hl-1">);</span><br/><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-7">transactions</span><span class="hl-1">);</span><br/><br/><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Scheduled transactions result`</span><span class="hl-1">, </span><span class="hl-7">transactions</span><span class="hl-1">);</span><br/><span class="hl-6">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">transactionHash</span><span class="hl-1">, </span><span class="hl-5">status</span><span class="hl-1"> } </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-7">transactions</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">result</span><span class="hl-1"> } = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">neonProxyRpcApi</span><span class="hl-1">.</span><span class="hl-0">getTransactionReceipt</span><span class="hl-1">(</span><span class="hl-7">transactionHash</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-7">result</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="creating-multiple-scheduled-transactions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Creating Multiple Scheduled Transactions<a href="#creating-multiple-scheduled-transactions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Multiple Scheduled Transactions</strong> is an advanced use case for creating a <strong>ScheduledTransaction</strong>.</p>
<p>For example, you may need to execute three transactions that call contract methods with different parameters and are executed sequentially, or where one depends on the completion of the other two. Alternatively, a transaction may involve a large volume of data that exceeds the limits of a single transaction permissible within the Solana network.</p>
<p>To create a <code>MultipleTransactions</code>, you need to instantiate the <code>MultipleTransactions</code> class with a common <code>nonce</code>, <code>maxFeePerGas</code>, and <code>maxPriorityFeePerGas</code>. At the same time, <code>maxFeePerGas</code> must match the value that will be passed to each <strong>ScheduledTransaction</strong>. After that, you can add individual transactions to the <code>MultipleTransactions</code> instance.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">multiple</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">MultipleTransactions</span><span class="hl-1">(</span><span class="hl-7">nonce</span><span class="hl-1">, </span><span class="hl-7">maxFeePerGas</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">transaction</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">ScheduledTransaction</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-7">nonce:</span><span class="hl-1"> </span><span class="hl-7">nonce</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">payer:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">index:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">target:</span><span class="hl-1"> </span><span class="hl-7">baseContract</span><span class="hl-1">.</span><span class="hl-7">address</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">callData:</span><span class="hl-1"> </span><span class="hl-7">baseContract</span><span class="hl-1">.</span><span class="hl-0">transactionData</span><span class="hl-1">(</span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">publicKey</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-7">maxFeePerGas:</span><span class="hl-1"> </span><span class="hl-7">maxFeePerGas</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">chainId:</span><span class="hl-1"> </span><span class="hl-7">chainId</span><br/><span class="hl-1">});</span><br/><span class="hl-7">multiple</span><span class="hl-1">.</span><span class="hl-0">addTransaction</span><span class="hl-1">(</span><span class="hl-7">transaction</span><span class="hl-1">, </span><span class="hl-5">NO_CHILD_INDEX</span><span class="hl-1">, </span><span class="hl-8">0</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>The <code>addTransaction</code> method accepts three parameters:</p>
<ul>
<li><code>transaction</code>: The Scheduled transaction to be added.</li>
<li><code>childIndex</code>: The index of child transactions that must be executed before this transaction starts. If the transaction has no dependent child transactions, the constant <code>NO_CHILD_INDEX</code> is passed.</li>
<li><code>successLimit</code>: The number of successful transactions that must be completed before this transaction starts execution.</li>
</ul>
<p>After adding all necessary transactions, you need to create a multiple transaction for Solana and send it for execution.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">createScheduledTransaction</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">createScheduledNeonEvmMultipleTransaction</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-7">chainId</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">neonEvmProgram</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">neonTransaction:</span><span class="hl-1"> </span><span class="hl-7">multiple</span><span class="hl-1">.</span><span class="hl-7">data</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">signerAddress:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">publicKey</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">tokenMintAddress:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">tokenMint</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">neonWallet:</span><span class="hl-1"> </span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">neonWalletNonce:</span><span class="hl-1"> </span><span class="hl-7">nonce</span><br/><span class="hl-1">});</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">sendSolanaTransaction</span><span class="hl-1">(</span><span class="hl-7">connection</span><span class="hl-1">, </span><span class="hl-7">createScheduledTransaction</span><span class="hl-1">, [</span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">signer</span><span class="hl-1">!], </span><span class="hl-4">true</span><span class="hl-1">, { </span><span class="hl-7">skipPreflight</span><span class="hl-1"> }, </span><span class="hl-2">&#39;scheduled&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>At this stage, you need to pass the Scheduled transaction to a specific method in the Neon Proxy RPC. If everything is done correctly, the Neon Proxy RPC will return the hash of the transaction.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> {</span><span class="hl-5">result</span><span class="hl-1">} = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">neonProxyRpcApi</span><span class="hl-1">.</span><span class="hl-0">sendRawScheduledTransaction</span><span class="hl-1">(</span><span class="hl-2">`0x</span><span class="hl-4">${</span><span class="hl-7">transaction</span><span class="hl-9">.</span><span class="hl-0">serialize</span><span class="hl-9">()</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-7">result</span><span class="hl-1"> === </span><span class="hl-7">transaction</span><span class="hl-1">.</span><span class="hl-0">hash</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<p>Next, you need to wait for the transaction to be executed.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">transactions</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">neonProxyRpcApi</span><span class="hl-1">.</span><span class="hl-0">waitTransactionTreeExecution</span><span class="hl-1">(</span><span class="hl-7">solanaUser</span><span class="hl-1">.</span><span class="hl-7">neonWallet</span><span class="hl-1">, </span><span class="hl-7">nonce</span><span class="hl-1">, </span><span class="hl-8">7e3</span><span class="hl-1">);</span><br/><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-7">transactions</span><span class="hl-1">);</span><br/><br/><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Scheduled transactions result`</span><span class="hl-1">, </span><span class="hl-7">transactions</span><span class="hl-1">);</span><br/><span class="hl-6">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">transactionHash</span><span class="hl-1">, </span><span class="hl-5">status</span><span class="hl-1"> } </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-7">transactions</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> { </span><span class="hl-5">result</span><span class="hl-1"> } = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-7">neonProxyRpcApi</span><span class="hl-1">.</span><span class="hl-0">getTransactionReceipt</span><span class="hl-1">(</span><span class="hl-7">transactionHash</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-7">result</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>By following these steps, you can create and execute a batch of Multiple Scheduled Transactions on Solana using Neon Proxy RPC.</p>
<a id="building-docs" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Building Docs<a href="#building-docs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>We can run TypeDoc with packages mode to generate a single docs folder in the root of the project.</p>
<pre><code class="sh"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">build:all</span><br/><span class="hl-3"># or</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build:all</span>
</code><button type="button">Copy</button></pre>

<p>Now, we can run TypeDoc with packages mode to generate a single docs folder</p>
<pre><code class="sh"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">build:docs</span><br/><span class="hl-3"># or</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">build:docs</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#library-for-scheduled-neon-evm-transaction"><span>Library for <wbr/>Scheduled <wbr/>Neon EVM <wbr/>Transaction</span></a><ul><li><a href="#how-to-install-and-run-tests"><span>How to install and run tests</span></a></li><li><a href="#how-to-use-it-in-code"><span>How to use it in code</span></a></li><li><ul><li><a href="#install-the-package"><span>Install the package</span></a></li><li><a href="#creating-multiple-scheduled-transactions"><span>Creating <wbr/>Multiple <wbr/>Scheduled <wbr/>Transactions</span></a></li></ul></li><li><a href="#building-docs"><span>Building <wbr/>Docs</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current">@neonevm/solana-sign - v0.1.6</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
